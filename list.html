<!DOCTYPE html>
<html>
    <head>
        <script src="//js.jotform.com/JotFormCustomWidget.min.js"></script>
        <!-- <script src="//code.jquery.com/jquery-1.11.3.min.js"></script> -->
        <script src="yaml.js"></script>
    </head>
    <body>
        <div id="main">
            
            <h3>This is my first widget.</h3>

        </div>



        <script type="text/javascript">
        //always subscribe to ready event and implement widget related code
        //inside callback function , it is the best practice while developing widgets
        JFCustomWidget.subscribe("ready", function(){
            var fields = JFCustomWidget.getWidgetSetting('fields');
            fields = YAML.parse(fields);

            for (var fieldName in fields) {
                if (fields.hasOwnProperty(fieldName)) {
                    

                    var field = fields[fieldName];
                    
                    var input = document.createElement("input");
                    input.setAttribute("type", field.type);
                    input.setAttribute("name", fieldName);

                    var label = document.createElement("label");
                    label.setAttribute("for", fieldName);
                    label.innerText = field.label;


                    document.getElementById("main").appendChild(label);
                    document.getElementById("main").appendChild(input);

                }
            }


            JFCustomWidget.subscribe("submit", function(){
                var msg = {
                    //you should valid attribute to data for JotForm
                    //to be able to use youw widget as required
                    valid: true,
                    value: "Temp"
                }
                // send value to JotForm
                JFCustomWidget.sendSubmit(msg);
            });
        });
        </script>
    </body>
</html>